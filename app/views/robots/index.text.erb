User-agent: *
Disallow: /
Allow: /$

<% if !Rails.env.production? || Danbooru.config.hostname == request.host %>
Disallow: /*.atom
Disallow: /*.json
Disallow: /posts?tags=source:*
Disallow: /posts?tags=ordfav:*
Disallow: /posts?tags=approver:*
Disallow: /posts/*/favorites
Disallow: /posts/*/show_seq*

Disallow: <%= artist_urls_path %>
Disallow: <%= artist_versions_path %>
Disallow: <%= artist_commentary_versions_path %>
Disallow: <%= note_versions_path %>
Disallow: <%= post_versions_path %>
Disallow: <%= pool_versions_path %>
Disallow: <%= wiki_page_versions_path %>

Allow: <%= artists_path %>
Allow: <%= artist_commentaries_path %>
Allow: <%= comments_path %>
Allow: <%= popular_explore_posts_path %>
Allow: <%= curated_explore_posts_path %>
Allow: <%= viewed_explore_posts_path %>
Allow: <%= searches_explore_posts_path %>
Allow: <%= missed_searches_explore_posts_path %>
Allow: <%= favorite_groups_path %>
Allow: <%= forum_posts_path %>
Allow: <%= forum_topics_path %>
Allow: <%= login_path %>
Allow: <%= notes_path %>
Allow: <%= pools_path %>
Allow: <%= posts_path %>
Allow: <%= new_session_path %>
Allow: <%= sign_out_session_path %>
Allow: <%= tags_path %>
Allow: <%= uploads_path %>
Allow: <%= user_upgrades_path %>
Allow: <%= users_path %>
Allow: <%= wiki_pages_path %>

<%# Legacy redirects %>
Allow: /artist
Allow: /comment
Allow: /forum
Allow: /note
Allow: /pool
Allow: /post
Allow: /tag
Allow: /user
Allow: /wiki

<%# Images %>
Allow: /crop
Allow: /preview
Allow: /original
Allow: /sample
Allow: /data
Allow: /images
Allow: /packs

<%# Static %>
Allow: <%= site_map_path %>
Allow: <%= contact_path %>
Allow: <%= keyboard_shortcuts_path %>
Allow: <%= bookmarklet_path %>
Allow: <%= terms_of_service_path %>
Allow: <%= privacy_policy_path %>
Allow: <%= not_found_path %>
Allow: /sitemap.xml
Allow: /favicon.ico
Allow: /favicon.svg

<% if Artist.undeleted.exists? %>
Sitemap: <%= sitemap_url(format: :xml, sitemap: "artists") %>
<% end %>

<% if ForumTopic.undeleted.exists? %>
Sitemap: <%= sitemap_url(format: :xml, sitemap: "forum_topics") %>
<% end %>

<% if Pool.undeleted.exists? %>
Sitemap: <%= sitemap_url(format: :xml, sitemap: "pools") %>
<% end %>

<% if Post.exists? %>
Sitemap: <%= sitemap_url(format: :xml, sitemap: "posts") %>
<% end %>

<% if Tag.nonempty.exists? %>
Sitemap: <%= sitemap_url(format: :xml, sitemap: "tags") %>
<% end %>

<% if User.exists? %>
Sitemap: <%= sitemap_url(format: :xml, sitemap: "users") %>
<% end %>

<% if WikiPage.undeleted.exists? %>
Sitemap: <%= sitemap_url(format: :xml, sitemap: "wiki_pages") %>
<% end %>

<% end %>
